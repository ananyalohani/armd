(function(j){typeof define=="function"&&define.amd?define(j):j()})(function(){"use strict";var j;(function(e){e[e.All=0]="All",e[e.Two=1]="Two",e[e.One=2]="One"})(j||(j={}));let $,Be;function Zt(e,t){if(e.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if(e.tagName.toLowerCase()==="html")return"html";const r={root:document.body,idName:o=>!0,className:o=>!0,tagName:o=>!0,attr:(o,i)=>!1,seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4};$=Object.assign(Object.assign({},r),t),Be=Vt($.root,r);let n=_e(e,j.All,()=>_e(e,j.Two,()=>_e(e,j.One)));if(n){const o=et(tt(n,e));return o.length>0&&(n=o[0]),Ie(n)}else throw new Error("Selector was not found.")}function Vt(e,t){return e.nodeType===Node.DOCUMENT_NODE?e:e===t.root?e.ownerDocument:e}function _e(e,t,r){let n=null,o=[],i=e,c=0;for(;i&&i!==$.root.parentElement;){let s=ke(Kt(i))||ke(...Yt(i))||ke(...zt(i))||ke(Ht(i))||[Jt()];const l=Pt(i);if(t===j.All)l&&(s=s.concat(s.filter(Ue).map(a=>Ge(a,l))));else if(t===j.Two)s=s.slice(0,1),l&&(s=s.concat(s.filter(Ue).map(a=>Ge(a,l))));else if(t===j.One){const[a]=s=s.slice(0,1);l&&Ue(a)&&(s=[Ge(a,l)])}for(let a of s)a.level=c;if(o.push(s),o.length>=$.seedMinLength&&(n=Xe(o,r),n))break;i=i.parentElement,c++}return n||(n=Xe(o,r)),n}function Xe(e,t){const r=et($e(e));if(r.length>$.threshold)return t?t():null;for(let n of r)if(je(n))return n;return null}function Ie(e){let t=e[0],r=t.name;for(let n=1;n<e.length;n++){const o=e[n].level||0;t.level===o-1?r=`${e[n].name} > ${r}`:r=`${e[n].name} ${r}`,t=e[n]}return r}function qe(e){return e.map(t=>t.penalty).reduce((t,r)=>t+r,0)}function je(e){switch(Be.querySelectorAll(Ie(e)).length){case 0:throw new Error(`Can't select any node with this selector: ${Ie(e)}`);case 1:return!0;default:return!1}}function Kt(e){const t=e.getAttribute("id");return t&&$.idName(t)?{name:"#"+Me(t,{isIdentifier:!0}),penalty:0}:null}function Yt(e){return Array.from(e.attributes).filter(r=>$.attr(r.name,r.value)).map(r=>({name:"["+Me(r.name,{isIdentifier:!0})+'="'+Me(r.value)+'"]',penalty:.5}))}function zt(e){return Array.from(e.classList).filter($.className).map(r=>({name:"."+Me(r,{isIdentifier:!0}),penalty:1}))}function Ht(e){const t=e.tagName.toLowerCase();return $.tagName(t)?{name:t,penalty:2}:null}function Jt(){return{name:"*",penalty:3}}function Pt(e){const t=e.parentNode;if(!t)return null;let r=t.firstChild;if(!r)return null;let n=0;for(;r&&(r.nodeType===Node.ELEMENT_NODE&&n++,r!==e);)r=r.nextSibling;return n}function Ge(e,t){return{name:e.name+`:nth-child(${t})`,penalty:e.penalty+1}}function Ue(e){return e.name!=="html"&&!e.name.startsWith("#")}function ke(...e){const t=e.filter(Qt);return t.length>0?t:null}function Qt(e){return e!=null}function*$e(e,t=[]){if(e.length>0)for(let r of e[0])yield*$e(e.slice(1,e.length),t.concat(r));else yield t}function et(e){return Array.from(e).sort((t,r)=>qe(t)-qe(r))}function*tt(e,t,r={counter:0,visited:new Map}){if(e.length>2&&e.length>$.optimizedMinLength)for(let n=1;n<e.length-1;n++){if(r.counter>$.maxNumberOfTries)return;r.counter+=1;const o=[...e];o.splice(n,1);const i=Ie(o);if(r.visited.has(i))return;je(o)&&Xt(o,t)&&(yield o,r.visited.set(i,!0),yield*tt(o,t,r))}}function Xt(e,t){return Be.querySelector(Ie(e))===t}const qt=/[ -,\.\/:-@\[-\^`\{-~]/,jt=/[ -,\.\/:-@\[\]\^`\{-~]/,$t=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,er={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1};function Me(e,t={}){const r=Object.assign(Object.assign({},er),t);r.quotes!="single"&&r.quotes!="double"&&(r.quotes="single");const n=r.quotes=="double"?'"':"'",o=r.isIdentifier,i=e.charAt(0);let c="",s=0;const l=e.length;for(;s<l;){const a=e.charAt(s++);let d=a.charCodeAt(0),u;if(d<32||d>126){if(d>=55296&&d<=56319&&s<l){const f=e.charCodeAt(s++);(f&64512)==56320?d=((d&1023)<<10)+(f&1023)+65536:s--}u="\\"+d.toString(16).toUpperCase()+" "}else r.escapeEverything?qt.test(a)?u="\\"+a:u="\\"+d.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(a)?u="\\"+d.toString(16).toUpperCase()+" ":a=="\\"||!o&&(a=='"'&&n==a||a=="'"&&n==a)||o&&jt.test(a)?u="\\"+a:u=a;c+=u}return o&&(/^-[-\d]/.test(c)?c="\\-"+c.slice(1):/\d/.test(i)&&(c="\\3"+i+" "+c.slice(1))),c=c.replace($t,function(a,d,u){return d&&d.length%2?a:(d||"")+u}),!o&&r.wrap?n+c+n:c}const Ze=(e,t,r)=>{t.forEach(n=>e.addEventListener(n,r,!1))},tr=e=>e?.nodeType===Node.ELEMENT_NODE;var F;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(F||(F={}));function rr(e){return e.nodeType===e.ELEMENT_NODE}function Ce(e){var t=e?.host;return Boolean(t?.shadowRoot===e)}function ye(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function nr(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}function Ve(e){try{var t=e.rules||e.cssRules;return t?nr(Array.from(t).map(rt).join("")):null}catch{return null}}function rt(e){var t=e.cssText;if(or(e))try{t=Ve(e.styleSheet)||t}catch{}return t}function or(e){return"styleSheet"in e}var nt=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(t){var r;if(!t)return-1;var n=(r=this.getMeta(t))===null||r===void 0?void 0:r.id;return n??-1},e.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},e.prototype.removeNodeFromMap=function(t){var r=this,n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(function(o){return r.removeNodeFromMap(o)})},e.prototype.has=function(t){return this.idNodeMap.has(t)},e.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},e.prototype.add=function(t,r){var n=r.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,r)},e.prototype.replace=function(t,r){var n=this.getNode(t);if(n){var o=this.nodeMetaMap.get(n);o&&this.nodeMetaMap.set(r,o)}this.idNodeMap.set(t,r)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function ir(){return new nt}function Ke(e){var t=e.maskInputOptions,r=e.tagName,n=e.type,o=e.value,i=e.maskInputFn,c=o||"";return(t[r.toLowerCase()]||t[n])&&(i?c=i(c):c="*".repeat(c.length)),c}var ot="__rrweb_original__";function sr(e){var t=e.getContext("2d");if(!t)return!0;for(var r=50,n=0;n<e.width;n+=r)for(var o=0;o<e.height;o+=r){var i=t.getImageData,c=ot in i?i[ot]:i,s=new Uint32Array(c.call(t,n,o,Math.min(r,e.width-n),Math.min(r,e.height-o)).data.buffer);if(s.some(function(l){return l!==0}))return!1}return!0}var ar=1,lr=new RegExp("[^a-z0-9-_:]"),Se=-2;function it(){return ar++}function cr(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return lr.test(t)?"div":t}function dr(e){return e.cssRules?Array.from(e.cssRules).map(function(t){return t.cssText||""}).join(""):""}function ur(e){var t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var ce,st,hr=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,fr=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,gr=/^(data:)([^,]*),(.*)/i;function Ne(e,t){return(e||"").replace(hr,function(r,n,o,i,c,s){var l=o||c||s,a=n||i||"";if(!l)return r;if(!fr.test(l)||gr.test(l))return"url(".concat(a).concat(l).concat(a,")");if(l[0]==="/")return"url(".concat(a).concat(ur(t)+l).concat(a,")");var d=t.split("/"),u=l.split("/");d.pop();for(var f=0,g=u;f<g.length;f++){var h=g[f];h!=="."&&(h===".."?d.pop():d.push(h))}return"url(".concat(a).concat(d.join("/")).concat(a,")")})}var pr=/^[^ \t\n\r\u000c]+/,mr=/^[, \t\n\r\u000c]+/;function Ir(e,t){if(t.trim()==="")return t;var r=0;function n(a){var d,u=a.exec(t.substring(r));return u?(d=u[0],r+=d.length,d):""}for(var o=[];n(mr),!(r>=t.length);){var i=n(pr);if(i.slice(-1)===",")i=de(e,i.substring(0,i.length-1)),o.push(i);else{var c="";i=de(e,i);for(var s=!1;;){var l=t.charAt(r);if(l===""){o.push((i+c).trim());break}else if(s)l===")"&&(s=!1);else if(l===","){r+=1,o.push((i+c).trim());break}else l==="("&&(s=!0);c+=l,r+=1}}}return o.join(", ")}function de(e,t){if(!t||t.trim()==="")return t;var r=e.createElement("a");return r.href=t,r.href}function Cr(e){return Boolean(e.tagName==="svg"||e.ownerSVGElement)}function Ye(){var e=document.createElement("a");return e.href="",e.href}function at(e,t,r,n){return r==="src"||r==="href"&&n&&!(t==="use"&&n[0]==="#")||r==="xlink:href"&&n&&n[0]!=="#"||r==="background"&&n&&(t==="table"||t==="td"||t==="th")?de(e,n):r==="srcset"&&n?Ir(e,n):r==="style"&&n?Ne(n,Ye()):t==="object"&&r==="data"&&n?de(e,n):n}function yr(e,t,r){if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return r?e.matches(r):!1}function Te(e,t,r){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return r?Te(e.parentNode,t,r):!1;for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return r?Te(e.parentNode,t,r):!1}function lt(e,t,r){var n=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(n===null)return!1;if(typeof t=="string"){if(n.classList.contains(t)||n.closest(".".concat(t)))return!0}else if(Te(n,t,!0))return!0;return!!(r&&(n.matches(r)||n.closest(r)))}function Sr(e,t,r){var n=e.contentWindow;if(!!n){var o=!1,i;try{i=n.document.readyState}catch{return}if(i!=="complete"){var c=setTimeout(function(){o||(t(),o=!0)},r);e.addEventListener("load",function(){clearTimeout(c),o=!0,t()});return}var s="about:blank";if(n.location.href!==s||e.src===s||e.src==="")return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}}function vr(e,t,r){var n=!1,o;try{o=e.sheet}catch{return}if(!o){var i=setTimeout(function(){n||(t(),n=!0)},r);e.addEventListener("load",function(){clearTimeout(i),n=!0,t()})}}function br(e,t){var r=t.doc,n=t.mirror,o=t.blockClass,i=t.blockSelector,c=t.maskTextClass,s=t.maskTextSelector,l=t.inlineStylesheet,a=t.maskInputOptions,d=a===void 0?{}:a,u=t.maskTextFn,f=t.maskInputFn,g=t.dataURLOptions,h=g===void 0?{}:g,I=t.inlineImages,S=t.recordCanvas,y=t.keepIframeSrcFn,p=t.newlyAddedElement,m=p===void 0?!1:p,w=Ar(r,n);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:F.Document,childNodes:[],compatMode:e.compatMode}:{type:F.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:F.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:w};case e.ELEMENT_NODE:return kr(e,{doc:r,blockClass:o,blockSelector:i,inlineStylesheet:l,maskInputOptions:d,maskInputFn:f,dataURLOptions:h,inlineImages:I,recordCanvas:S,keepIframeSrcFn:y,newlyAddedElement:m,rootId:w});case e.TEXT_NODE:return wr(e,{maskTextClass:c,maskTextSelector:s,maskTextFn:u,rootId:w});case e.CDATA_SECTION_NODE:return{type:F.CDATA,textContent:"",rootId:w};case e.COMMENT_NODE:return{type:F.Comment,textContent:e.textContent||"",rootId:w};default:return!1}}function Ar(e,t){if(!!t.hasNode(e)){var r=t.getId(e);return r===1?void 0:r}}function wr(e,t){var r,n=t.maskTextClass,o=t.maskTextSelector,i=t.maskTextFn,c=t.rootId,s=e.parentNode&&e.parentNode.tagName,l=e.textContent,a=s==="STYLE"?!0:void 0,d=s==="SCRIPT"?!0:void 0;if(a&&l){try{e.nextSibling||e.previousSibling||!((r=e.parentNode.sheet)===null||r===void 0)&&r.cssRules&&(l=dr(e.parentNode.sheet))}catch(u){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(u),e)}l=Ne(l,Ye())}return d&&(l="SCRIPT_PLACEHOLDER"),!a&&!d&&l&&lt(e,n,o)&&(l=i?i(l):l.replace(/[\S]/g,"*")),{type:F.Text,textContent:l||"",isStyle:a,rootId:c}}function kr(e,t){for(var r=t.doc,n=t.blockClass,o=t.blockSelector,i=t.inlineStylesheet,c=t.maskInputOptions,s=c===void 0?{}:c,l=t.maskInputFn,a=t.dataURLOptions,d=a===void 0?{}:a,u=t.inlineImages,f=t.recordCanvas,g=t.keepIframeSrcFn,h=t.newlyAddedElement,I=h===void 0?!1:h,S=t.rootId,y=yr(e,n,o),p=cr(e),m={},w=e.attributes.length,_=0;_<w;_++){var x=e.attributes[_];m[x.name]=at(r,p,x.name,x.value)}if(p==="link"&&i){var D=Array.from(r.styleSheets).find(function(J){return J.href===e.href}),M=null;D&&(M=Ve(D)),M&&(delete m.rel,delete m.href,m._cssText=Ne(M,D.href))}if(p==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){var M=Ve(e.sheet);M&&(m._cssText=Ne(M,Ye()))}if(p==="input"||p==="textarea"||p==="select"){var Y=e.value,z=e.checked;m.type!=="radio"&&m.type!=="checkbox"&&m.type!=="submit"&&m.type!=="button"&&Y?m.value=Ke({type:m.type,tagName:p,value:Y,maskInputOptions:s,maskInputFn:l}):z&&(m.checked=z)}if(p==="option"&&(e.selected&&!s.select?m.selected=!0:delete m.selected),p==="canvas"&&f){if(e.__context==="2d")sr(e)||(m.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){var Q=e.toDataURL(d.type,d.quality),X=document.createElement("canvas");X.width=e.width,X.height=e.height;var q=X.toDataURL(d.type,d.quality);Q!==q&&(m.rr_dataURL=Q)}}if(p==="img"&&u){ce||(ce=r.createElement("canvas"),st=ce.getContext("2d"));var E=e,H=E.crossOrigin;E.crossOrigin="anonymous";var te=function(){try{ce.width=E.naturalWidth,ce.height=E.naturalHeight,st.drawImage(E,0,0),m.rr_dataURL=ce.toDataURL(d.type,d.quality)}catch(J){console.warn("Cannot inline img src=".concat(E.currentSrc,"! Error: ").concat(J))}H?m.crossOrigin=H:E.removeAttribute("crossorigin")};E.complete&&E.naturalWidth!==0?te():E.onload=te}if((p==="audio"||p==="video")&&(m.rr_mediaState=e.paused?"paused":"played",m.rr_mediaCurrentTime=e.currentTime),I||(e.scrollLeft&&(m.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(m.rr_scrollTop=e.scrollTop)),y){var ne=e.getBoundingClientRect(),ie=ne.width,Z=ne.height;m={class:m.class,rr_width:"".concat(ie,"px"),rr_height:"".concat(Z,"px")}}return p==="iframe"&&!g(m.src)&&(e.contentDocument||(m.rr_src=m.src),delete m.src),{type:F.Element,tagName:p,attributes:m,childNodes:[],isSVG:Cr(e)||void 0,needBlock:y,rootId:S}}function k(e){return e===void 0?"":e.toLowerCase()}function Mr(e,t){if(t.comment&&e.type===F.Comment)return!0;if(e.type===F.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&e.attributes.rel==="preload"&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(k(e.attributes.name).match(/^msapplication-tile(image|color)$/)||k(e.attributes.name)==="application-name"||k(e.attributes.rel)==="icon"||k(e.attributes.rel)==="apple-touch-icon"||k(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&k(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(k(e.attributes.property).match(/^(og|twitter|fb):/)||k(e.attributes.name).match(/^(og|twitter):/)||k(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(k(e.attributes.name)==="robots"||k(e.attributes.name)==="googlebot"||k(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(k(e.attributes.name)==="author"||k(e.attributes.name)==="generator"||k(e.attributes.name)==="framework"||k(e.attributes.name)==="publisher"||k(e.attributes.name)==="progid"||k(e.attributes.property).match(/^article:/)||k(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(k(e.attributes.name)==="google-site-verification"||k(e.attributes.name)==="yandex-verification"||k(e.attributes.name)==="csrf-token"||k(e.attributes.name)==="p:domain_verify"||k(e.attributes.name)==="verify-v1"||k(e.attributes.name)==="verification"||k(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function ue(e,t){var r=t.doc,n=t.mirror,o=t.blockClass,i=t.blockSelector,c=t.maskTextClass,s=t.maskTextSelector,l=t.skipChild,a=l===void 0?!1:l,d=t.inlineStylesheet,u=d===void 0?!0:d,f=t.maskInputOptions,g=f===void 0?{}:f,h=t.maskTextFn,I=t.maskInputFn,S=t.slimDOMOptions,y=t.dataURLOptions,p=y===void 0?{}:y,m=t.inlineImages,w=m===void 0?!1:m,_=t.recordCanvas,x=_===void 0?!1:_,D=t.onSerialize,M=t.onIframeLoad,Y=t.iframeLoadTimeout,z=Y===void 0?5e3:Y,Q=t.onStylesheetLoad,X=t.stylesheetLoadTimeout,q=X===void 0?5e3:X,E=t.keepIframeSrcFn,H=E===void 0?function(){return!1}:E,te=t.newlyAddedElement,ne=te===void 0?!1:te,ie=t.preserveWhiteSpace,Z=ie===void 0?!0:ie,J=br(e,{doc:r,mirror:n,blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:s,inlineStylesheet:u,maskInputOptions:g,maskTextFn:h,maskInputFn:I,dataURLOptions:p,inlineImages:w,recordCanvas:x,keepIframeSrcFn:H,newlyAddedElement:ne});if(!J)return console.warn(e,"not serialized"),null;var ae;n.hasNode(e)?ae=n.getId(e):Mr(J,S)||!Z&&J.type===F.Text&&!J.isStyle&&!J.textContent.replace(/^\s+|\s+$/gm,"").length?ae=Se:ae=it();var R=Object.assign(J,{id:ae});if(n.add(e,R),ae===Se)return null;D&&D(e);var re=!a;if(R.type===F.Element){re=re&&!R.needBlock,delete R.needBlock;var oe=e.shadowRoot;oe&&ye(oe)&&(R.isShadowHost=!0)}if((R.type===F.Document||R.type===F.Element)&&re){S.headWhitespace&&R.type===F.Element&&R.tagName==="head"&&(Z=!1);for(var me={doc:r,mirror:n,blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:s,skipChild:a,inlineStylesheet:u,maskInputOptions:g,maskTextFn:h,maskInputFn:I,slimDOMOptions:S,dataURLOptions:p,inlineImages:w,recordCanvas:x,preserveWhiteSpace:Z,onSerialize:D,onIframeLoad:M,iframeLoadTimeout:z,onStylesheetLoad:Q,stylesheetLoadTimeout:q,keepIframeSrcFn:H},C=0,G=Array.from(e.childNodes);C<G.length;C++){var V=G[C],N=ue(V,me);N&&R.childNodes.push(N)}if(rr(e)&&e.shadowRoot)for(var P=0,A=Array.from(e.shadowRoot.childNodes);P<A.length;P++){var V=A[P],N=ue(V,me);N&&(ye(e.shadowRoot)&&(N.isShadow=!0),R.childNodes.push(N))}}return e.parentNode&&Ce(e.parentNode)&&ye(e.parentNode)&&(R.isShadow=!0),R.type===F.Element&&R.tagName==="iframe"&&Sr(e,function(){var K=e.contentDocument;if(K&&M){var we=ue(K,{doc:K,mirror:n,blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:s,skipChild:!1,inlineStylesheet:u,maskInputOptions:g,maskTextFn:h,maskInputFn:I,slimDOMOptions:S,dataURLOptions:p,inlineImages:w,recordCanvas:x,preserveWhiteSpace:Z,onSerialize:D,onIframeLoad:M,iframeLoadTimeout:z,onStylesheetLoad:Q,stylesheetLoadTimeout:q,keepIframeSrcFn:H});we&&M(e,we)}},z),R.type===F.Element&&R.tagName==="link"&&R.attributes.rel==="stylesheet"&&vr(e,function(){if(Q){var K=ue(e,{doc:r,mirror:n,blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:s,skipChild:!1,inlineStylesheet:u,maskInputOptions:g,maskTextFn:h,maskInputFn:I,slimDOMOptions:S,dataURLOptions:p,inlineImages:w,recordCanvas:x,preserveWhiteSpace:Z,onSerialize:D,onIframeLoad:M,iframeLoadTimeout:z,onStylesheetLoad:Q,stylesheetLoadTimeout:q,keepIframeSrcFn:H});K&&Q(e,K)}},q),R}function Nr(e,t){var r=t||{},n=r.mirror,o=n===void 0?new nt:n,i=r.blockClass,c=i===void 0?"rr-block":i,s=r.blockSelector,l=s===void 0?null:s,a=r.maskTextClass,d=a===void 0?"rr-mask":a,u=r.maskTextSelector,f=u===void 0?null:u,g=r.inlineStylesheet,h=g===void 0?!0:g,I=r.inlineImages,S=I===void 0?!1:I,y=r.recordCanvas,p=y===void 0?!1:y,m=r.maskAllInputs,w=m===void 0?!1:m,_=r.maskTextFn,x=r.maskInputFn,D=r.slimDOM,M=D===void 0?!1:D,Y=r.dataURLOptions,z=r.preserveWhiteSpace,Q=r.onSerialize,X=r.onIframeLoad,q=r.iframeLoadTimeout,E=r.onStylesheetLoad,H=r.stylesheetLoadTimeout,te=r.keepIframeSrcFn,ne=te===void 0?function(){return!1}:te,ie=w===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:w===!1?{password:!0}:w,Z=M===!0||M==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:M==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:M===!1?{}:M;return ue(e,{doc:e,mirror:o,blockClass:c,blockSelector:l,maskTextClass:d,maskTextSelector:f,skipChild:!1,inlineStylesheet:h,maskInputOptions:ie,maskTextFn:_,maskInputFn:x,slimDOMOptions:Z,dataURLOptions:Y,inlineImages:S,recordCanvas:p,preserveWhiteSpace:z,onSerialize:Q,onIframeLoad:X,iframeLoadTimeout:q,onStylesheetLoad:E,stylesheetLoadTimeout:H,keepIframeSrcFn:ne,newlyAddedElement:!1})}function W(e,t,r=document){const n={capture:!0,passive:!0};return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}const he=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let ct={map:{},getId(){return console.error(he),-1},getNode(){return console.error(he),null},removeNodeFromMap(){console.error(he)},has(){return console.error(he),!1},reset(){console.error(he)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(ct=new Proxy(ct,{get(e,t,r){return t==="map"&&console.error(he),Reflect.get(e,t,r)}}));function ve(e,t,r={}){let n=null,o=0;return function(...i){const c=Date.now();!o&&r.leading===!1&&(o=c);const s=t-(c-o),l=this;s<=0||s>t?(n&&(clearTimeout(n),n=null),o=c,e.apply(l,i)):!n&&r.trailing!==!1&&(n=setTimeout(()=>{o=r.leading===!1?0:Date.now(),n=null,e.apply(l,i)},s))}}function Re(e,t,r,n,o=window){const i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,n?r:{set(c){setTimeout(()=>{r.set.call(this,c)},0),i&&i.set&&i.set.call(this,c)}}),()=>Re(e,t,i||{},!0)}function fe(e,t,r){try{if(!(t in e))return()=>{};const n=e[t],o=r(n);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=o,()=>{e[t]=n}}catch{return()=>{}}}function dt(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function ut(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function B(e,t,r,n){if(!e)return!1;const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!o)return!1;if(typeof t=="string"){if(o.classList.contains(t)||n&&o.closest("."+t)!==null)return!0}else if(Te(o,t,n))return!0;return!!(r&&(e.matches(r)||n&&o.closest(r)!==null))}function Tr(e,t){return t.getId(e)!==-1}function ze(e,t){return t.getId(e)===Se}function ht(e,t){if(Ce(e))return!1;const r=t.getId(e);return t.has(r)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?ht(e.parentNode,t):!0:!0}function ft(e){return Boolean(e.changedTouches)}function Rr(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let r=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===r)return!0;while(r=r&&r.parentNode);return!1})}function gt(e,t){return Boolean(e.nodeName==="IFRAME"&&t.getMeta(e))}function pt(e,t){return Boolean(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function mt(e){return Boolean(e?.shadowRoot)}class Or{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var r;return(r=this.styleIDMap.get(t))!==null&&r!==void 0?r:-1}has(t){return this.styleIDMap.has(t)}add(t,r){if(this.has(t))return this.getId(t);let n;return r===void 0?n=this.id++:n=r,this.styleIDMap.set(t,n),this.idStyleMap.set(n,t),n}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}var b=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(b||{}),v=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e))(v||{}),He=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(He||{}),ge=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(ge||{});function It(e){return"__ln"in e}class Er{constructor(){this.length=0,this.head=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let r=this.head;for(let n=0;n<t;n++)r=r?.next||null;return r}addNode(t){const r={value:t,previous:null,next:null};if(t.__ln=r,t.previousSibling&&It(t.previousSibling)){const n=t.previousSibling.__ln.next;r.next=n,r.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=r,n&&(n.previous=r)}else if(t.nextSibling&&It(t.nextSibling)&&t.nextSibling.__ln.previous){const n=t.nextSibling.__ln.previous;r.previous=n,r.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=r,n&&(n.next=r)}else this.head&&(this.head.previous=r),r.next=this.head,this.head=r;this.length++}removeNode(t){const r=t.__ln;!this.head||(r.previous?(r.previous.next=r.next,r.next&&(r.next.previous=r.previous)):(this.head=r.next,this.head&&(this.head.previous=null)),t.__ln&&delete t.__ln,this.length--)}}const Ct=(e,t)=>`${e}@${t}`;class Fr{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],r=new Er,n=s=>{let l=s,a=Se;for(;a===Se;)l=l&&l.nextSibling,a=l&&this.mirror.getId(l);return a},o=s=>{var l,a,d,u;let f=null;((a=(l=s.getRootNode)===null||l===void 0?void 0:l.call(s))===null||a===void 0?void 0:a.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&s.getRootNode().host&&(f=s.getRootNode().host);let g=f;for(;((u=(d=g?.getRootNode)===null||d===void 0?void 0:d.call(g))===null||u===void 0?void 0:u.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&g.getRootNode().host;)g=g.getRootNode().host;const h=!this.doc.contains(s)&&(!g||!this.doc.contains(g));if(!s.parentNode||h)return;const I=Ce(s.parentNode)?this.mirror.getId(f):this.mirror.getId(s.parentNode),S=n(s);if(I===-1||S===-1)return r.addNode(s);const y=ue(s,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:p=>{gt(p,this.mirror)&&this.iframeManager.addIframe(p),pt(p,this.mirror)&&this.stylesheetManager.trackLinkElement(p),mt(s)&&this.shadowDomManager.addShadowRoot(s.shadowRoot,this.doc)},onIframeLoad:(p,m)=>{this.iframeManager.attachIframe(p,m),this.shadowDomManager.observeAttachShadow(p)},onStylesheetLoad:(p,m)=>{this.stylesheetManager.attachLinkElement(p,m)}});y&&t.push({parentId:I,nextId:S,node:y})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const s of Array.from(this.movedSet.values()))yt(this.removes,s,this.mirror)&&!this.movedSet.has(s.parentNode)||o(s);for(const s of Array.from(this.addedSet.values()))!vt(this.droppedSet,s)&&!yt(this.removes,s,this.mirror)||vt(this.movedSet,s)?o(s):this.droppedSet.add(s);let i=null;for(;r.length;){let s=null;if(i){const l=this.mirror.getId(i.value.parentNode),a=n(i.value);l!==-1&&a!==-1&&(s=i)}if(!s)for(let l=r.length-1;l>=0;l--){const a=r.get(l);if(a){const d=this.mirror.getId(a.value.parentNode);if(n(a.value)===-1)continue;if(d!==-1){s=a;break}else{const f=a.value;if(f.parentNode&&f.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const g=f.parentNode.host;if(this.mirror.getId(g)!==-1){s=a;break}}}}}if(!s){for(;r.head;)r.removeNode(r.head.value);break}i=s.previous,r.removeNode(s.value),o(s.value)}const c={texts:this.texts.map(s=>({id:this.mirror.getId(s.node),value:s.value})).filter(s=>this.mirror.has(s.id)),attributes:this.attributes.map(s=>({id:this.mirror.getId(s.node),attributes:s.attributes})).filter(s=>this.mirror.has(s.id)),removes:this.removes,adds:t};!c.texts.length&&!c.attributes.length&&!c.removes.length&&!c.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(c))},this.processMutation=t=>{if(!ze(t.target,this.mirror))switch(t.type){case"characterData":{const r=t.target.textContent;!B(t.target,this.blockClass,this.blockSelector,!1)&&r!==t.oldValue&&this.texts.push({value:lt(t.target,this.maskTextClass,this.maskTextSelector)&&r?this.maskTextFn?this.maskTextFn(r):r.replace(/[\S]/g,"*"):r,node:t.target});break}case"attributes":{const r=t.target;let n=t.target.getAttribute(t.attributeName);if(t.attributeName==="value"&&(n=Ke({maskInputOptions:this.maskInputOptions,tagName:t.target.tagName,type:t.target.getAttribute("type"),value:n,maskInputFn:this.maskInputFn})),B(t.target,this.blockClass,this.blockSelector,!1)||n===t.oldValue)return;let o=this.attributes.find(i=>i.node===t.target);if(r.tagName==="IFRAME"&&t.attributeName==="src"&&!this.keepIframeSrcFn(n))if(!r.contentDocument)t.attributeName="rr_src";else return;if(o||(o={node:t.target,attributes:{}},this.attributes.push(o)),t.attributeName==="style"){const i=this.doc.createElement("span");t.oldValue&&i.setAttribute("style",t.oldValue),(o.attributes.style===void 0||o.attributes.style===null)&&(o.attributes.style={});const c=o.attributes.style;for(const s of Array.from(r.style)){const l=r.style.getPropertyValue(s),a=r.style.getPropertyPriority(s);(l!==i.style.getPropertyValue(s)||a!==i.style.getPropertyPriority(s))&&(a===""?c[s]=l:c[s]=[l,a])}for(const s of Array.from(i.style))r.style.getPropertyValue(s)===""&&(c[s]=!1)}else o.attributes[t.attributeName]=at(this.doc,r.tagName,t.attributeName,n);break}case"childList":{if(B(t.target,this.blockClass,this.blockSelector,!0))return;t.addedNodes.forEach(r=>this.genAdds(r,t.target)),t.removedNodes.forEach(r=>{const n=this.mirror.getId(r),o=Ce(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);B(t.target,this.blockClass,this.blockSelector,!1)||ze(r,this.mirror)||!Tr(r,this.mirror)||(this.addedSet.has(r)?(Je(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(t.target)&&n===-1||ht(t.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[Ct(n,o)]?Je(this.movedSet,r):this.removes.push({parentId:o,id:n,isShadow:Ce(t.target)&&ye(t.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(t,r)=>{if(this.mirror.hasNode(t)){if(ze(t,this.mirror))return;this.movedSet.add(t);let n=null;r&&this.mirror.hasNode(r)&&(n=this.mirror.getId(r)),n&&n!==-1&&(this.movedMap[Ct(this.mirror.getId(t),n)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);B(t,this.blockClass,this.blockSelector,!1)||t.childNodes.forEach(n=>this.genAdds(n))}}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager"].forEach(r=>{this[r]=t[r]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Je(e,t){e.delete(t),t.childNodes.forEach(r=>Je(e,r))}function yt(e,t,r){return e.length===0?!1:St(e,t,r)}function St(e,t,r){const{parentNode:n}=t;if(!n)return!1;const o=r.getId(n);return e.some(i=>i.id===o)?!0:St(e,n,r)}function vt(e,t){return e.size===0?!1:bt(e,t)}function bt(e,t){const{parentNode:r}=t;return r?e.has(r)?!0:bt(e,r):!1}const le=[],At=typeof CSSGroupingRule<"u",wt=typeof CSSMediaRule<"u",kt=typeof CSSSupportsRule<"u",Mt=typeof CSSConditionRule<"u";function be(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch{return e.target}}function Nt(e,t){var r,n;const o=new Fr;le.push(o),o.init(e);let i=window.MutationObserver||window.__rrMutationObserver;const c=(n=(r=window?.Zone)===null||r===void 0?void 0:r.__symbol__)===null||n===void 0?void 0:n.call(r,"MutationObserver");c&&window[c]&&(i=window[c]);const s=new i(o.processMutations.bind(o));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Lr({mousemoveCb:e,sampling:t,doc:r,mirror:n}){if(t.mousemove===!1)return()=>{};const o=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let c=[],s;const l=ve(u=>{const f=Date.now()-s;e(c.map(g=>(g.timeOffset-=f,g)),u),c=[],s=null},i),a=ve(u=>{const f=be(u),{clientX:g,clientY:h}=ft(u)?u.changedTouches[0]:u;s||(s=Date.now()),c.push({x:g,y:h,id:n.getId(f),timeOffset:Date.now()-s}),l(typeof DragEvent<"u"&&u instanceof DragEvent?v.Drag:u instanceof MouseEvent?v.MouseMove:v.TouchMove)},o,{trailing:!1}),d=[W("mousemove",a,r),W("touchmove",a,r),W("drag",a,r)];return()=>{d.forEach(u=>u())}}function xr({mouseInteractionCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,sampling:i}){if(i.mouseInteraction===!1)return()=>{};const c=i.mouseInteraction===!0||i.mouseInteraction===void 0?{}:i.mouseInteraction,s=[],l=a=>d=>{const u=be(d);if(B(u,n,o,!0))return;const f=ft(d)?d.changedTouches[0]:d;if(!f)return;const g=r.getId(u),{clientX:h,clientY:I}=f;e({type:He[a],id:g,x:h,y:I})};return Object.keys(He).filter(a=>Number.isNaN(Number(a))&&!a.endsWith("_Departed")&&c[a]!==!1).forEach(a=>{const d=a.toLowerCase(),u=l(a);s.push(W(d,u,t))}),()=>{s.forEach(a=>a())}}function Tt({scrollCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,sampling:i}){const c=ve(s=>{const l=be(s);if(!l||B(l,n,o,!0))return;const a=r.getId(l);if(l===t){const d=t.scrollingElement||t.documentElement;e({id:a,x:d.scrollLeft,y:d.scrollTop})}else e({id:a,x:l.scrollLeft,y:l.scrollTop})},i.scroll||100);return W("scroll",c,t)}function Dr({viewportResizeCb:e}){let t=-1,r=-1;const n=ve(()=>{const o=dt(),i=ut();(t!==o||r!==i)&&(e({width:Number(i),height:Number(o)}),t=o,r=i)},200);return W("resize",n,window)}function Rt(e,t){const r=Object.assign({},e);return t||delete r.userTriggered,r}const Wr=["INPUT","TEXTAREA","SELECT"],Ot=new WeakMap;function Br({inputCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,ignoreClass:i,maskInputOptions:c,maskInputFn:s,sampling:l,userTriggeredOnInput:a}){function d(y){let p=be(y);const m=y.isTrusted;if(p&&p.tagName==="OPTION"&&(p=p.parentElement),!p||!p.tagName||Wr.indexOf(p.tagName)<0||B(p,n,o,!0))return;const w=p.type;if(p.classList.contains(i))return;let _=p.value,x=!1;w==="radio"||w==="checkbox"?x=p.checked:(c[p.tagName.toLowerCase()]||c[w])&&(_=Ke({maskInputOptions:c,tagName:p.tagName,type:w,value:_,maskInputFn:s})),u(p,Rt({text:_,isChecked:x,userTriggered:m},a));const D=p.name;w==="radio"&&D&&x&&t.querySelectorAll(`input[type="radio"][name="${D}"]`).forEach(M=>{M!==p&&u(M,Rt({text:M.value,isChecked:!x,userTriggered:!1},a))})}function u(y,p){const m=Ot.get(y);if(!m||m.text!==p.text||m.isChecked!==p.isChecked){Ot.set(y,p);const w=r.getId(y);e(Object.assign(Object.assign({},p),{id:w}))}}const g=(l.input==="last"?["change"]:["input","change"]).map(y=>W(y,d,t)),h=t.defaultView;if(!h)return()=>{g.forEach(y=>y())};const I=h.Object.getOwnPropertyDescriptor(h.HTMLInputElement.prototype,"value"),S=[[h.HTMLInputElement.prototype,"value"],[h.HTMLInputElement.prototype,"checked"],[h.HTMLSelectElement.prototype,"value"],[h.HTMLTextAreaElement.prototype,"value"],[h.HTMLSelectElement.prototype,"selectedIndex"],[h.HTMLOptionElement.prototype,"selected"]];return I&&I.set&&g.push(...S.map(y=>Re(y[0],y[1],{set(){d({target:this})}},!1,h))),()=>{g.forEach(y=>y())}}function Oe(e){const t=[];function r(n,o){if(At&&n.parentRule instanceof CSSGroupingRule||wt&&n.parentRule instanceof CSSMediaRule||kt&&n.parentRule instanceof CSSSupportsRule||Mt&&n.parentRule instanceof CSSConditionRule){const c=Array.from(n.parentRule.cssRules).indexOf(n);o.unshift(c)}else if(n.parentStyleSheet){const c=Array.from(n.parentStyleSheet.cssRules).indexOf(n);o.unshift(c)}return o}return r(e,t)}function se(e,t,r){let n,o;return e?(e.ownerNode?n=t.getId(e.ownerNode):o=r.getId(e),{styleId:o,id:n}):{}}function _r({styleSheetRuleCb:e,mirror:t,stylesheetManager:r},{win:n}){const o=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=function(d,u){const{id:f,styleId:g}=se(this,t,r.styleMirror);return(f&&f!==-1||g&&g!==-1)&&e({id:f,styleId:g,adds:[{rule:d,index:u}]}),o.apply(this,[d,u])};const i=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=function(d){const{id:u,styleId:f}=se(this,t,r.styleMirror);return(u&&u!==-1||f&&f!==-1)&&e({id:u,styleId:f,removes:[{index:d}]}),i.apply(this,[d])};let c;n.CSSStyleSheet.prototype.replace&&(c=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=function(d){const{id:u,styleId:f}=se(this,t,r.styleMirror);return(u&&u!==-1||f&&f!==-1)&&e({id:u,styleId:f,replace:d}),c.apply(this,[d])});let s;n.CSSStyleSheet.prototype.replaceSync&&(s=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=function(d){const{id:u,styleId:f}=se(this,t,r.styleMirror);return(u&&u!==-1||f&&f!==-1)&&e({id:u,styleId:f,replaceSync:d}),s.apply(this,[d])});const l={};At?l.CSSGroupingRule=n.CSSGroupingRule:(wt&&(l.CSSMediaRule=n.CSSMediaRule),Mt&&(l.CSSConditionRule=n.CSSConditionRule),kt&&(l.CSSSupportsRule=n.CSSSupportsRule));const a={};return Object.entries(l).forEach(([d,u])=>{a[d]={insertRule:u.prototype.insertRule,deleteRule:u.prototype.deleteRule},u.prototype.insertRule=function(f,g){const{id:h,styleId:I}=se(this.parentStyleSheet,t,r.styleMirror);return(h&&h!==-1||I&&I!==-1)&&e({id:h,styleId:I,adds:[{rule:f,index:[...Oe(this),g||0]}]}),a[d].insertRule.apply(this,[f,g])},u.prototype.deleteRule=function(f){const{id:g,styleId:h}=se(this.parentStyleSheet,t,r.styleMirror);return(g&&g!==-1||h&&h!==-1)&&e({id:g,styleId:h,removes:[{index:[...Oe(this),f]}]}),a[d].deleteRule.apply(this,[f])}}),()=>{n.CSSStyleSheet.prototype.insertRule=o,n.CSSStyleSheet.prototype.deleteRule=i,c&&(n.CSSStyleSheet.prototype.replace=c),s&&(n.CSSStyleSheet.prototype.replaceSync=s),Object.entries(l).forEach(([d,u])=>{u.prototype.insertRule=a[d].insertRule,u.prototype.deleteRule=a[d].deleteRule})}}function Et({mirror:e,stylesheetManager:t},r){var n,o,i;let c=null;r.nodeName==="#document"?c=e.getId(r):c=e.getId(r.host);const s=r.nodeName==="#document"?(n=r.defaultView)===null||n===void 0?void 0:n.Document:(i=(o=r.ownerDocument)===null||o===void 0?void 0:o.defaultView)===null||i===void 0?void 0:i.ShadowRoot,l=Object.getOwnPropertyDescriptor(s?.prototype,"adoptedStyleSheets");return c===null||c===-1||!s||!l?()=>{}:(Object.defineProperty(r,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get(){var a;return(a=l.get)===null||a===void 0?void 0:a.call(this)},set(a){var d;const u=(d=l.set)===null||d===void 0?void 0:d.call(this,a);if(c!==null&&c!==-1)try{t.adoptStyleSheets(a,c)}catch{}return u}}),()=>{Object.defineProperty(r,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get:l.get,set:l.set})})}function Gr({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:r,stylesheetManager:n},{win:o}){const i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=function(s,l,a){var d;if(r.has(s))return i.apply(this,[s,l,a]);const{id:u,styleId:f}=se((d=this.parentRule)===null||d===void 0?void 0:d.parentStyleSheet,t,n.styleMirror);return(u&&u!==-1||f&&f!==-1)&&e({id:u,styleId:f,set:{property:s,value:l,priority:a},index:Oe(this.parentRule)}),i.apply(this,[s,l,a])};const c=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=function(s){var l;if(r.has(s))return c.apply(this,[s]);const{id:a,styleId:d}=se((l=this.parentRule)===null||l===void 0?void 0:l.parentStyleSheet,t,n.styleMirror);return(a&&a!==-1||d&&d!==-1)&&e({id:a,styleId:d,remove:{property:s},index:Oe(this.parentRule)}),c.apply(this,[s])},()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=c}}function Ur({mediaInteractionCb:e,blockClass:t,blockSelector:r,mirror:n,sampling:o}){const i=s=>ve(l=>{const a=be(l);if(!a||B(a,t,r,!0))return;const{currentTime:d,volume:u,muted:f,playbackRate:g}=a;e({type:s,id:n.getId(a),currentTime:d,volume:u,muted:f,playbackRate:g})},o.media||500),c=[W("play",i(0)),W("pause",i(1)),W("seeked",i(2)),W("volumechange",i(3)),W("ratechange",i(4))];return()=>{c.forEach(s=>s())}}function Zr({fontCb:e,doc:t}){const r=t.defaultView;if(!r)return()=>{};const n=[],o=new WeakMap,i=r.FontFace;r.FontFace=function(l,a,d){const u=new i(l,a,d);return o.set(u,{family:l,buffer:typeof a!="string",descriptors:d,fontSource:typeof a=="string"?a:JSON.stringify(Array.from(new Uint8Array(a)))}),u};const c=fe(t.fonts,"add",function(s){return function(l){return setTimeout(()=>{const a=o.get(l);a&&(e(a),o.delete(l))},0),s.apply(this,[l])}});return n.push(()=>{r.FontFace=i}),n.push(c),()=>{n.forEach(s=>s())}}function Vr(e){const{doc:t,mirror:r,blockClass:n,blockSelector:o,selectionCb:i}=e;let c=!0;const s=()=>{const l=t.getSelection();if(!l||c&&l?.isCollapsed)return;c=l.isCollapsed||!1;const a=[],d=l.rangeCount||0;for(let u=0;u<d;u++){const f=l.getRangeAt(u),{startContainer:g,startOffset:h,endContainer:I,endOffset:S}=f;B(g,n,o,!0)||B(I,n,o,!0)||a.push({start:r.getId(g),startOffset:h,end:r.getId(I),endOffset:S})}i({ranges:a})};return s(),W("selectionchange",s)}function Kr(e,t){const{mutationCb:r,mousemoveCb:n,mouseInteractionCb:o,scrollCb:i,viewportResizeCb:c,inputCb:s,mediaInteractionCb:l,styleSheetRuleCb:a,styleDeclarationCb:d,canvasMutationCb:u,fontCb:f,selectionCb:g}=e;e.mutationCb=(...h)=>{t.mutation&&t.mutation(...h),r(...h)},e.mousemoveCb=(...h)=>{t.mousemove&&t.mousemove(...h),n(...h)},e.mouseInteractionCb=(...h)=>{t.mouseInteraction&&t.mouseInteraction(...h),o(...h)},e.scrollCb=(...h)=>{t.scroll&&t.scroll(...h),i(...h)},e.viewportResizeCb=(...h)=>{t.viewportResize&&t.viewportResize(...h),c(...h)},e.inputCb=(...h)=>{t.input&&t.input(...h),s(...h)},e.mediaInteractionCb=(...h)=>{t.mediaInteaction&&t.mediaInteaction(...h),l(...h)},e.styleSheetRuleCb=(...h)=>{t.styleSheetRule&&t.styleSheetRule(...h),a(...h)},e.styleDeclarationCb=(...h)=>{t.styleDeclaration&&t.styleDeclaration(...h),d(...h)},e.canvasMutationCb=(...h)=>{t.canvasMutation&&t.canvasMutation(...h),u(...h)},e.fontCb=(...h)=>{t.font&&t.font(...h),f(...h)},e.selectionCb=(...h)=>{t.selection&&t.selection(...h),g(...h)}}function Yr(e,t={}){const r=e.doc.defaultView;if(!r)return()=>{};Kr(e,t);const n=Nt(e,e.doc),o=Lr(e),i=xr(e),c=Tt(e),s=Dr(e),l=Br(e),a=Ur(e),d=_r(e,{win:r}),u=Et(e,e.doc),f=Gr(e,{win:r}),g=e.collectFonts?Zr(e):()=>{},h=Vr(e),I=[];for(const S of e.plugins)I.push(S.observer(S.callback,r,S.options));return()=>{le.forEach(S=>S.reset()),n.disconnect(),o(),i(),c(),s(),l(),a(),d(),u(),f(),g(),h(),I.forEach(S=>S())}}class Ft{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,r,n,o){const i=n||this.getIdToRemoteIdMap(t),c=o||this.getRemoteIdToIdMap(t);let s=i.get(r);return s||(s=this.generateIdFn(),i.set(r,s),c.set(s,r)),s}getIds(t,r){const n=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return r.map(i=>this.getId(t,i,n,o))}getRemoteId(t,r,n){const o=n||this.getRemoteIdToIdMap(t);if(typeof r!="number")return r;const i=o.get(r);return i||-1}getRemoteIds(t,r){const n=this.getRemoteIdToIdMap(t);return r.map(o=>this.getRemoteId(t,o,n))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let r=this.iframeIdToRemoteIdMap.get(t);return r||(r=new Map,this.iframeIdToRemoteIdMap.set(t,r)),r}getRemoteIdToIdMap(t){let r=this.iframeRemoteIdToIdMap.get(t);return r||(r=new Map,this.iframeRemoteIdToIdMap.set(t,r)),r}}class zr{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Ft(it),this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Ft(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,r){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:r}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(n=this.loadListener)===null||n===void 0||n.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){if(t.data.type==="rrweb"){if(!t.source)return;const n=this.crossOriginIframeMap.get(t.source);if(!n)return;const o=this.transformCrossOriginEvent(n,t.data.event);o&&this.wrappedEmit(o,t.data.isCheckout)}}transformCrossOriginEvent(t,r){var n;switch(r.type){case b.FullSnapshot:return this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(r.data.node,t),{timestamp:r.timestamp,type:b.IncrementalSnapshot,data:{source:v.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:r.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case b.Meta:case b.Load:case b.DomContentLoaded:return!1;case b.Plugin:return r;case b.Custom:return this.replaceIds(r.data.payload,t,["id","parentId","previousId","nextId"]),r;case b.IncrementalSnapshot:switch(r.data.source){case v.Mutation:return r.data.adds.forEach(o=>{this.replaceIds(o,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(o.node,t)}),r.data.removes.forEach(o=>{this.replaceIds(o,t,["parentId","id"])}),r.data.attributes.forEach(o=>{this.replaceIds(o,t,["id"])}),r.data.texts.forEach(o=>{this.replaceIds(o,t,["id"])}),r;case v.Drag:case v.TouchMove:case v.MouseMove:return r.data.positions.forEach(o=>{this.replaceIds(o,t,["id"])}),r;case v.ViewportResize:return!1;case v.MediaInteraction:case v.MouseInteraction:case v.Scroll:case v.CanvasMutation:case v.Input:return this.replaceIds(r.data,t,["id"]),r;case v.StyleSheetRule:case v.StyleDeclaration:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleId"]),r;case v.Font:return r;case v.Selection:return r.data.ranges.forEach(o=>{this.replaceIds(o,t,["start","end"])}),r;case v.AdoptedStyleSheet:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleIds"]),(n=r.data.styles)===null||n===void 0||n.forEach(o=>{this.replaceStyleIds(o,t,["styleId"])}),r}}}replace(t,r,n,o){for(const i of o)!Array.isArray(r[i])&&typeof r[i]!="number"||(Array.isArray(r[i])?r[i]=t.getIds(n,r[i]):r[i]=t.getId(n,r[i]));return r}replaceIds(t,r,n){return this.replace(this.crossOriginIframeMirror,t,r,n)}replaceStyleIds(t,r,n){return this.replace(this.crossOriginIframeStyleMirror,t,r,n)}replaceIdOnNode(t,r){this.replaceIds(t,r,["id"]),"childNodes"in t&&t.childNodes.forEach(n=>{this.replaceIdOnNode(n,r)})}}class Hr{constructor(t){this.shadowDoms=new WeakSet,this.restorePatches=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror;const r=this;this.restorePatches.push(fe(Element.prototype,"attachShadow",function(n){return function(o){const i=n.call(this,o);return this.shadowRoot&&r.addShadowRoot(this.shadowRoot,this.ownerDocument),i}}))}addShadowRoot(t,r){!ye(t)||this.shadowDoms.has(t)||(this.shadowDoms.add(t),Nt(Object.assign(Object.assign({},this.bypassOptions),{doc:r,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t),Tt(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),setTimeout(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),Et({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t)},0))}observeAttachShadow(t){if(t.contentWindow){const r=this;this.restorePatches.push(fe(t.contentWindow.HTMLElement.prototype,"attachShadow",function(n){return function(o){const i=n.call(this,o);return this.shadowRoot&&r.addShadowRoot(this.shadowRoot,t.contentDocument),i}}))}}reset(){this.restorePatches.forEach(t=>t()),this.shadowDoms=new WeakSet}}function Jr(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Pr(e,t,r,n){function o(i){return i instanceof r?i:new r(function(c){c(i)})}return new(r||(r=Promise))(function(i,c){function s(d){try{a(n.next(d))}catch(u){c(u)}}function l(d){try{a(n.throw(d))}catch(u){c(u)}}function a(d){d.done?i(d.value):o(d.value).then(s,l)}a((n=n.apply(e,t||[])).next())})}for(var pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qr=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ee=0;Ee<pe.length;Ee++)Qr[pe.charCodeAt(Ee)]=Ee;var Xr=function(e){var t=new Uint8Array(e),r,n=t.length,o="";for(r=0;r<n;r+=3)o+=pe[t[r]>>2],o+=pe[(t[r]&3)<<4|t[r+1]>>4],o+=pe[(t[r+1]&15)<<2|t[r+2]>>6],o+=pe[t[r+2]&63];return n%3===2?o=o.substring(0,o.length-1)+"=":n%3===1&&(o=o.substring(0,o.length-2)+"=="),o};const Lt=new Map;function qr(e,t){let r=Lt.get(e);return r||(r=new Map,Lt.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}const xt=(e,t,r)=>{if(!e||!(Wt(e,t)||typeof e=="object"))return;const n=e.constructor.name,o=qr(r,n);let i=o.indexOf(e);return i===-1&&(i=o.length,o.push(e)),i};function Fe(e,t,r){if(e instanceof Array)return e.map(n=>Fe(n,t,r));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const n=e.constructor.name,o=Xr(e);return{rr_type:n,base64:o}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[Fe(e.buffer,t,r),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const n=e.constructor.name,{src:o}=e;return{rr_type:n,src:o}}else if(e instanceof HTMLCanvasElement){const n="HTMLImageElement",o=e.toDataURL();return{rr_type:n,src:o}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[Fe(e.data,t,r),e.width,e.height]};if(Wt(e,t)||typeof e=="object"){const n=e.constructor.name,o=xt(e,t,r);return{rr_type:n,index:o}}}}return e}const Dt=(e,t,r)=>[...e].map(n=>Fe(n,t,r)),Wt=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(o=>typeof t[o]=="function");return Boolean(n.find(o=>e instanceof t[o]))};function jr(e,t,r,n){const o=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const c of i)try{if(typeof t.CanvasRenderingContext2D.prototype[c]!="function")continue;const s=fe(t.CanvasRenderingContext2D.prototype,c,function(l){return function(...a){return B(this.canvas,r,n,!0)||setTimeout(()=>{const d=Dt([...a],t,this);e(this.canvas,{type:ge["2D"],property:c,args:d})},0),l.apply(this,a)}});o.push(s)}catch{const l=Re(t.CanvasRenderingContext2D.prototype,c,{set(a){e(this.canvas,{type:ge["2D"],property:c,args:[a],setter:!0})}});o.push(l)}return()=>{o.forEach(c=>c())}}function Bt(e,t,r){const n=[];try{const o=fe(e.HTMLCanvasElement.prototype,"getContext",function(i){return function(c,...s){return B(this,t,r,!0)||"__context"in this||(this.__context=c),i.apply(this,[c,...s])}});n.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{n.forEach(o=>o())}}function _t(e,t,r,n,o,i,c){const s=[],l=Object.getOwnPropertyNames(e);for(const a of l)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(a))try{if(typeof e[a]!="function")continue;const d=fe(e,a,function(u){return function(...f){const g=u.apply(this,f);if(xt(g,c,this),!B(this.canvas,n,o,!0)){const h=Dt([...f],c,this),I={type:t,property:a,args:h};r(this.canvas,I)}return g}});s.push(d)}catch{const u=Re(e,a,{set(f){r(this.canvas,{type:t,property:a,args:[f],setter:!0})}});s.push(u)}return s}function $r(e,t,r,n,o){const i=[];return i.push(..._t(t.WebGLRenderingContext.prototype,ge.WebGL,e,r,n,o,t)),typeof t.WebGL2RenderingContext<"u"&&i.push(..._t(t.WebGL2RenderingContext.prototype,ge.WebGL2,e,r,n,o,t)),()=>{i.forEach(c=>c())}}var Gt=null;try{var en=typeof module<"u"&&typeof module.require=="function"&&module.require("worker_threads")||typeof __non_webpack_require__=="function"&&__non_webpack_require__("worker_threads")||typeof require=="function"&&require("worker_threads");Gt=en.Worker}catch{}function tn(e,t){return Buffer.from(e,"base64").toString(t?"utf16":"utf8")}function rn(e,t,r){var n=t===void 0?null:t,o=r===void 0?!1:r,i=tn(e,o),c=i.indexOf(`
`,10)+1,s=i.substring(c)+(n?"//# sourceMappingURL="+n:"");return function(a){return new Gt(s,Object.assign({},a,{eval:!0}))}}function nn(e,t){var r=atob(e);if(t){for(var n=new Uint8Array(r.length),o=0,i=r.length;o<i;++o)n[o]=r.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return r}function on(e,t,r){var n=t===void 0?null:t,o=r===void 0?!1:r,i=nn(e,o),c=i.indexOf(`
`,10)+1,s=i.substring(c)+(n?"//# sourceMappingURL="+n:""),l=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(l)}function sn(e,t,r){var n;return function(i){return n=n||on(e,t,r),new Worker(n,i)}}var an=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";function ln(){return an}function cn(e,t,r){return ln()?rn(e,t,r):sn(e,t,r)}var dn=cn("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=",null,!1);class un{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(l,a)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(l)||this.pendingCanvasMutations.set(l,[]),this.pendingCanvasMutations.get(l).push(a)};const{sampling:r="all",win:n,blockClass:o,blockSelector:i,recordCanvas:c,dataURLOptions:s}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,c&&r==="all"&&this.initCanvasMutationObserver(n,o,i),c&&typeof r=="number"&&this.initCanvasFPSObserver(r,n,o,i,{dataURLOptions:s})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(t,r,n,o,i){const c=Bt(r,n,o),s=new Map,l=new dn;l.onmessage=h=>{const{id:I}=h.data;if(s.set(I,!1),!("base64"in h.data))return;const{base64:S,type:y,width:p,height:m}=h.data;this.mutationCb({id:I,type:ge["2D"],commands:[{property:"clearRect",args:[0,0,p,m]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:S}],type:y}]},0,0]}]})};const a=1e3/t;let d=0,u;const f=()=>{const h=[];return r.document.querySelectorAll("canvas").forEach(I=>{B(I,n,o,!0)||h.push(I)}),h},g=h=>{if(d&&h-d<a){u=requestAnimationFrame(g);return}d=h,f().forEach(I=>Pr(this,void 0,void 0,function*(){var S;const y=this.mirror.getId(I);if(s.get(y))return;if(s.set(y,!0),["webgl","webgl2"].includes(I.__context)){const m=I.getContext(I.__context);((S=m?.getContextAttributes())===null||S===void 0?void 0:S.preserveDrawingBuffer)===!1&&m?.clear(m.COLOR_BUFFER_BIT)}const p=yield createImageBitmap(I);l.postMessage({id:y,bitmap:p,width:I.width,height:I.height,dataURLOptions:i.dataURLOptions},[p])})),u=requestAnimationFrame(g)};u=requestAnimationFrame(g),this.resetObservers=()=>{c(),cancelAnimationFrame(u)}}initCanvasMutationObserver(t,r,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=Bt(t,r,n),i=jr(this.processMutation.bind(this),t,r,n),c=$r(this.processMutation.bind(this),t,r,n,this.mirror);this.resetObservers=()=>{o(),i(),c()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=r=>{this.rafStamps.latestId=r,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,r)=>{const n=this.mirror.getId(r);this.flushPendingCanvasMutationFor(r,n)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,r){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(t);if(!n||r===-1)return;const o=n.map(c=>Jr(c,["type"])),{type:i}=n[0];this.mutationCb({id:r,type:i,commands:o}),this.pendingCanvasMutations.delete(t)}}class hn{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new Or,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,r){"_cssText"in r.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:r.id,attributes:r.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,r){if(t.length===0)return;const n={id:r,styleIds:[]},o=[];for(const i of t){let c;if(this.styleMirror.has(i))c=this.styleMirror.getId(i);else{c=this.styleMirror.add(i);const s=Array.from(i.rules||CSSRule);o.push({styleId:c,rules:s.map((l,a)=>({rule:rt(l),index:a}))})}n.styleIds.push(c)}o.length>0&&(n.styles=o),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}function O(e){return Object.assign(Object.assign({},e),{timestamp:Date.now()})}let T,Le,Pe,xe=!1;const ee=ir();function Ae(e={}){const{emit:t,checkoutEveryNms:r,checkoutEveryNth:n,blockClass:o="rr-block",blockSelector:i=null,ignoreClass:c="rr-ignore",maskTextClass:s="rr-mask",maskTextSelector:l=null,inlineStylesheet:a=!0,maskAllInputs:d,maskInputOptions:u,slimDOMOptions:f,maskInputFn:g,maskTextFn:h,hooks:I,packFn:S,sampling:y={},dataURLOptions:p={},mousemoveWait:m,recordCanvas:w=!1,recordCrossOriginIframes:_=!1,userTriggeredOnInput:x=!1,collectFonts:D=!1,inlineImages:M=!1,plugins:Y,keepIframeSrcFn:z=()=>!1,ignoreCSSAttributes:Q=new Set([])}=e,X=_?window.parent===window:!0;let q=!1;if(!X)try{window.parent.document,q=!1}catch{q=!0}if(X&&!t)throw new Error("emit function is required");m!==void 0&&y.mousemove===void 0&&(y.mousemove=m),ee.reset();const E=d===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:u!==void 0?u:{password:!0},H=f===!0||f==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:f==="all",headMetaDescKeywords:f==="all"}:f||{};Rr();let te,ne=0;const ie=C=>{for(const G of Y||[])G.eventProcessor&&(C=G.eventProcessor(C));return S&&(C=S(C)),C};T=(C,G)=>{var V;if(((V=le[0])===null||V===void 0?void 0:V.isFrozen())&&C.type!==b.FullSnapshot&&!(C.type===b.IncrementalSnapshot&&C.data.source===v.Mutation)&&le.forEach(N=>N.unfreeze()),X)t?.(ie(C),G);else if(q){const N={type:"rrweb",event:ie(C),isCheckout:G};window.parent.postMessage(N,"*")}if(C.type===b.FullSnapshot)te=C,ne=0;else if(C.type===b.IncrementalSnapshot){if(C.data.source===v.Mutation&&C.data.isAttachIframe)return;ne++;const N=n&&ne>=n,P=r&&C.timestamp-te.timestamp>r;(N||P)&&Le(!0)}};const Z=C=>{T(O({type:b.IncrementalSnapshot,data:Object.assign({source:v.Mutation},C)}))},J=C=>T(O({type:b.IncrementalSnapshot,data:Object.assign({source:v.Scroll},C)})),ae=C=>T(O({type:b.IncrementalSnapshot,data:Object.assign({source:v.CanvasMutation},C)})),R=C=>T(O({type:b.IncrementalSnapshot,data:Object.assign({source:v.AdoptedStyleSheet},C)})),re=new hn({mutationCb:Z,adoptedStyleSheetCb:R}),oe=new zr({mirror:ee,mutationCb:Z,stylesheetManager:re,recordCrossOriginIframes:_,wrappedEmit:T});for(const C of Y||[])C.getMirror&&C.getMirror({nodeMirror:ee,crossOriginIframeMirror:oe.crossOriginIframeMirror,crossOriginIframeStyleMirror:oe.crossOriginIframeStyleMirror});Pe=new un({recordCanvas:w,mutationCb:ae,win:window,blockClass:o,blockSelector:i,mirror:ee,sampling:y.canvas,dataURLOptions:p});const me=new Hr({mutationCb:Z,scrollCb:J,bypassOptions:{blockClass:o,blockSelector:i,maskTextClass:s,maskTextSelector:l,inlineStylesheet:a,maskInputOptions:E,dataURLOptions:p,maskTextFn:h,maskInputFn:g,recordCanvas:w,inlineImages:M,sampling:y,slimDOMOptions:H,iframeManager:oe,stylesheetManager:re,canvasManager:Pe,keepIframeSrcFn:z},mirror:ee});Le=(C=!1)=>{var G,V,N,P,A,K;T(O({type:b.Meta,data:{href:window.location.href,width:ut(),height:dt()}}),C),re.reset(),le.forEach(U=>U.lock());const we=Nr(document,{mirror:ee,blockClass:o,blockSelector:i,maskTextClass:s,maskTextSelector:l,inlineStylesheet:a,maskAllInputs:E,maskTextFn:h,slimDOM:H,dataURLOptions:p,recordCanvas:w,inlineImages:M,onSerialize:U=>{gt(U,ee)&&oe.addIframe(U),pt(U,ee)&&re.trackLinkElement(U),mt(U)&&me.addShadowRoot(U.shadowRoot,document)},onIframeLoad:(U,Qe)=>{oe.attachIframe(U,Qe),me.observeAttachShadow(U)},onStylesheetLoad:(U,Qe)=>{re.attachLinkElement(U,Qe)},keepIframeSrcFn:z});if(!we)return console.warn("Failed to snapshot the document");T(O({type:b.FullSnapshot,data:{node:we,initialOffset:{left:window.pageXOffset!==void 0?window.pageXOffset:document?.documentElement.scrollLeft||((V=(G=document?.body)===null||G===void 0?void 0:G.parentElement)===null||V===void 0?void 0:V.scrollLeft)||((N=document?.body)===null||N===void 0?void 0:N.scrollLeft)||0,top:window.pageYOffset!==void 0?window.pageYOffset:document?.documentElement.scrollTop||((A=(P=document?.body)===null||P===void 0?void 0:P.parentElement)===null||A===void 0?void 0:A.scrollTop)||((K=document?.body)===null||K===void 0?void 0:K.scrollTop)||0}}})),le.forEach(U=>U.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&re.adoptStyleSheets(document.adoptedStyleSheets,ee.getId(document))};try{const C=[];C.push(W("DOMContentLoaded",()=>{T(O({type:b.DomContentLoaded,data:{}}))}));const G=N=>{var P;return Yr({mutationCb:Z,mousemoveCb:(A,K)=>T(O({type:b.IncrementalSnapshot,data:{source:K,positions:A}})),mouseInteractionCb:A=>T(O({type:b.IncrementalSnapshot,data:Object.assign({source:v.MouseInteraction},A)})),scrollCb:J,viewportResizeCb:A=>T(O({type:b.IncrementalSnapshot,data:Object.assign({source:v.ViewportResize},A)})),inputCb:A=>T(O({type:b.IncrementalSnapshot,data:Object.assign({source:v.Input},A)})),mediaInteractionCb:A=>T(O({type:b.IncrementalSnapshot,data:Object.assign({source:v.MediaInteraction},A)})),styleSheetRuleCb:A=>T(O({type:b.IncrementalSnapshot,data:Object.assign({source:v.StyleSheetRule},A)})),styleDeclarationCb:A=>T(O({type:b.IncrementalSnapshot,data:Object.assign({source:v.StyleDeclaration},A)})),canvasMutationCb:ae,fontCb:A=>T(O({type:b.IncrementalSnapshot,data:Object.assign({source:v.Font},A)})),selectionCb:A=>{T(O({type:b.IncrementalSnapshot,data:Object.assign({source:v.Selection},A)}))},blockClass:o,ignoreClass:c,maskTextClass:s,maskTextSelector:l,maskInputOptions:E,inlineStylesheet:a,sampling:y,recordCanvas:w,inlineImages:M,userTriggeredOnInput:x,collectFonts:D,doc:N,maskInputFn:g,maskTextFn:h,keepIframeSrcFn:z,blockSelector:i,slimDOMOptions:H,dataURLOptions:p,mirror:ee,iframeManager:oe,stylesheetManager:re,shadowDomManager:me,canvasManager:Pe,ignoreCSSAttributes:Q,plugins:((P=Y?.filter(A=>A.observer))===null||P===void 0?void 0:P.map(A=>({observer:A.observer,options:A.options,callback:K=>T(O({type:b.Plugin,data:{plugin:A.name,payload:K}}))})))||[]},I)};oe.addLoadListener(N=>{C.push(G(N.contentDocument))});const V=()=>{Le(),C.push(G(document)),xe=!0};return document.readyState==="interactive"||document.readyState==="complete"?V():C.push(W("load",()=>{T(O({type:b.Load,data:{}})),V()},window)),()=>{C.forEach(N=>N()),xe=!1}}catch(C){console.warn(C)}}Ae.addCustomEvent=(e,t)=>{if(!xe)throw new Error("please add custom event after start recording");T(O({type:b.Custom,data:{tag:e,payload:t}}))},Ae.freezePage=()=>{le.forEach(e=>e.freeze())},Ae.takeFullSnapshot=e=>{if(!xe)throw new Error("please take full snapshot after start recording");Le(e)},Ae.mirror=ee;let De;const fn=new Uint8Array(16);function gn(){if(!De&&(De=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!De))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return De(fn)}const L=[];for(let e=0;e<256;++e)L.push((e+256).toString(16).slice(1));function pn(e,t=0){return(L[e[t+0]]+L[e[t+1]]+L[e[t+2]]+L[e[t+3]]+"-"+L[e[t+4]]+L[e[t+5]]+"-"+L[e[t+6]]+L[e[t+7]]+"-"+L[e[t+8]]+L[e[t+9]]+"-"+L[e[t+10]]+L[e[t+11]]+L[e[t+12]]+L[e[t+13]]+L[e[t+14]]+L[e[t+15]]).toLowerCase()}const Ut={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function mn(e,t,r){if(Ut.randomUUID&&!t&&!e)return Ut.randomUUID();e=e||{};const n=e.random||(e.rng||gn)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return pn(n)}const In=e=>{const t=e.target;return{type:e.type,sessionId:sessionStorage.getItem("ARMD_SESSION_ID"),properties:{referrer:document.referrer,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY,host:window.location.hostname,pathname:window.location.pathname,userAgent:navigator.userAgent,userAgentData:JSON.stringify(navigator.userAgentData),clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight,screenWidth:window.screen.width,screenHeight:window.screen.height,selector:tr(t)?Zt(t):void 0,innerText:t?.innerText,destination:e.destination}}},Cn=e=>t=>{const r=In(t);fetch(`${e}/log`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:r}),keepalive:!0})};let We=[];Ae({emit(e){We.push(e)}});const yn=e=>()=>{if(!We.length)return;const t=sessionStorage.getItem("ARMD_SESSION_ID"),r=JSON.stringify({events:We,sessionId:t});We=[],fetch(`${e}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:r,keepalive:!0})},Sn=({base:e})=>{sessionStorage.setItem("ARMD_SESSION_ID",mn());const t=Cn(e),r=yn(e);setInterval(r,10*1e3),document.addEventListener("DOMContentLoaded",async()=>{Ze(window,["resize","scroll","pageshow","pagehide","contextmenu","beforeunload"],t),Ze(document,["click","dblclick","scroll"],t),window.navigation&&Ze(window.navigation,["navigate"],t)})};window.startArmd=Sn});

