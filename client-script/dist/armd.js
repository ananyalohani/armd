(function(f){typeof define=="function"&&define.amd?define(f):f()})(function(){"use strict";var f;(function(e){e[e.All=0]="All",e[e.Two=1]="Two",e[e.One=2]="One"})(f||(f={}));let u,w;function q(e,t){if(e.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if(e.tagName.toLowerCase()==="html")return"html";const n={root:document.body,idName:i=>!0,className:i=>!0,tagName:i=>!0,attr:(i,s)=>!1,seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4};u=Object.assign(Object.assign({},n),t),w=D(u.root,n);let r=y(e,f.All,()=>y(e,f.Two,()=>y(e,f.One)));if(r){const i=T(C(r,e));return i.length>0&&(r=i[0]),h(r)}else throw new Error("Selector was not found.")}function D(e,t){return e.nodeType===Node.DOCUMENT_NODE?e:e===t.root?e.ownerDocument:e}function y(e,t,n){let r=null,i=[],s=e,a=0;for(;s&&s!==u.root.parentElement;){let l=g(M(s))||g(...L(s))||g(...X(s))||g(Y(s))||[I()];const d=P(s);if(t===f.All)d&&(l=l.concat(l.filter(N).map(o=>E(o,d))));else if(t===f.Two)l=l.slice(0,1),d&&(l=l.concat(l.filter(N).map(o=>E(o,d))));else if(t===f.One){const[o]=l=l.slice(0,1);d&&N(o)&&(l=[E(o,d)])}for(let o of l)o.level=a;if(i.push(l),i.length>=u.seedMinLength&&(r=A(i,n),r))break;s=s.parentElement,a++}return r||(r=A(i,n)),r}function A(e,t){const n=T(v(e));if(n.length>u.threshold)return t?t():null;for(let r of n)if(O(r))return r;return null}function h(e){let t=e[0],n=t.name;for(let r=1;r<e.length;r++){const i=e[r].level||0;t.level===i-1?n=`${e[r].name} > ${n}`:n=`${e[r].name} ${n}`,t=e[r]}return n}function b(e){return e.map(t=>t.penalty).reduce((t,n)=>t+n,0)}function O(e){switch(w.querySelectorAll(h(e)).length){case 0:throw new Error(`Can't select any node with this selector: ${h(e)}`);case 1:return!0;default:return!1}}function M(e){const t=e.getAttribute("id");return t&&u.idName(t)?{name:"#"+p(t,{isIdentifier:!0}),penalty:0}:null}function L(e){return Array.from(e.attributes).filter(n=>u.attr(n.name,n.value)).map(n=>({name:"["+p(n.name,{isIdentifier:!0})+'="'+p(n.value)+'"]',penalty:.5}))}function X(e){return Array.from(e.classList).filter(u.className).map(n=>({name:"."+p(n,{isIdentifier:!0}),penalty:1}))}function Y(e){const t=e.tagName.toLowerCase();return u.tagName(t)?{name:t,penalty:2}:null}function I(){return{name:"*",penalty:3}}function P(e){const t=e.parentNode;if(!t)return null;let n=t.firstChild;if(!n)return null;let r=0;for(;n&&(n.nodeType===Node.ELEMENT_NODE&&r++,n!==e);)n=n.nextSibling;return r}function E(e,t){return{name:e.name+`:nth-child(${t})`,penalty:e.penalty+1}}function N(e){return e.name!=="html"&&!e.name.startsWith("#")}function g(...e){const t=e.filter(U);return t.length>0?t:null}function U(e){return e!=null}function*v(e,t=[]){if(e.length>0)for(let n of e[0])yield*v(e.slice(1,e.length),t.concat(n));else yield t}function T(e){return Array.from(e).sort((t,n)=>b(t)-b(n))}function*C(e,t,n={counter:0,visited:new Map}){if(e.length>2&&e.length>u.optimizedMinLength)for(let r=1;r<e.length-1;r++){if(n.counter>u.maxNumberOfTries)return;n.counter+=1;const i=[...e];i.splice(r,1);const s=h(i);if(n.visited.has(s))return;O(i)&&j(i,t)&&(yield i,n.visited.set(s,!0),yield*C(i,t,n))}}function j(e,t){return w.querySelector(h(e))===t}const z=/[ -,\.\/:-@\[-\^`\{-~]/,$=/[ -,\.\/:-@\[\]\^`\{-~]/,H=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,W={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1};function p(e,t={}){const n=Object.assign(Object.assign({},W),t);n.quotes!="single"&&n.quotes!="double"&&(n.quotes="single");const r=n.quotes=="double"?'"':"'",i=n.isIdentifier,s=e.charAt(0);let a="",l=0;const d=e.length;for(;l<d;){const o=e.charAt(l++);let c=o.charCodeAt(0),m;if(c<32||c>126){if(c>=55296&&c<=56319&&l<d){const S=e.charCodeAt(l++);(S&64512)==56320?c=((c&1023)<<10)+(S&1023)+65536:l--}m="\\"+c.toString(16).toUpperCase()+" "}else n.escapeEverything?z.test(o)?m="\\"+o:m="\\"+c.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(o)?m="\\"+c.toString(16).toUpperCase()+" ":o=="\\"||!i&&(o=='"'&&r==o||o=="'"&&r==o)||i&&$.test(o)?m="\\"+o:m=o;a+=m}return i&&(/^-[-\d]/.test(a)?a="\\-"+a.slice(1):/\d/.test(s)&&(a="\\3"+s+" "+a.slice(1))),a=a.replace(H,function(o,c,m){return c&&c.length%2?o:(c||"")+m}),!i&&n.wrap?r+a+r:a}const x=(e,t,n)=>{t.forEach(r=>e.addEventListener(r,n,!1))},_=e=>e?.nodeType===Node.ELEMENT_NODE,F=e=>{const t=e.target;return{event:e.type,properties:{referrer:document.referrer,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY,host:window.location.hostname,pathname:window.location.pathname,userAgent:navigator.userAgent,userAgentData:JSON.stringify(navigator.userAgentData),clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight,screenWidth:window.screen.width,screenHeight:window.screen.height,selector:_(t)?q(t):void 0,innerText:t?.innerText,destination:e.destination}}},J=e=>t=>{const n=F(t);fetch(`${e}/log`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:n}),keepalive:!0})},k=({base:e})=>{const t=J(e);document.addEventListener("DOMContentLoaded",async()=>{x(window,["resize","scroll","pageshow","pagehide","contextmenu","beforeunload"],t),x(document,["click","dblclick","scroll"],t),window.navigation&&x(window.navigation,["navigate"],t)})};window.startArmd=k});
